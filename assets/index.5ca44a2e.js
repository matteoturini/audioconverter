(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}})();function R(){}const Be=e=>e;function be(e,t){for(const r in t)e[r]=t[r];return e}function Oe(e){return e()}function we(){return Object.create(null)}function te(e){e.forEach(Oe)}function Pe(e){return typeof e=="function"}function Se(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function We(e){return Object.keys(e).length===0}function xe(e,...t){if(e==null)return R;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function ve(e,t,r){e.$$.on_destroy.push(xe(t,r))}const Ae=typeof window<"u";let qe=Ae?()=>window.performance.now():()=>Date.now(),Ce=Ae?e=>requestAnimationFrame(e):R;const H=new Set;function Te(e){H.forEach(t=>{t.c(e)||(H.delete(t),t.f())}),H.size!==0&&Ce(Te)}function ze(e){let t;return H.size===0&&Ce(Te),{promise:new Promise(r=>{H.add(t={c:e,f:r})}),abort(){H.delete(t)}}}function N(e,t){e.appendChild(t)}function Ne(e,t,r){e.insertBefore(t,r||null)}function me(e){e.parentNode&&e.parentNode.removeChild(e)}function Ye(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function B(e){return document.createElement(e)}function Re(e){return document.createTextNode(e)}function Q(){return Re(" ")}function ce(e,t,r,s){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r,s)}function D(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Ve(e){return Array.from(e.childNodes)}function He(e,t,r,s){r===null?e.style.removeProperty(t):e.style.setProperty(t,r,s?"important":"")}function _e(e,t){for(let r=0;r<e.options.length;r+=1){const s=e.options[r];if(s.__value===t){s.selected=!0;return}}e.selectedIndex=-1}let ge;function ee(e){ge=e}const X=[],ue=[],ie=[],Fe=[],Je=Promise.resolve();let pe=!1;function Ke(){pe||(pe=!0,Je.then(Ge))}function de(e){ie.push(e)}const fe=new Set;let oe=0;function Ge(){const e=ge;do{for(;oe<X.length;){const t=X[oe];oe++,ee(t),Ze(t.$$)}for(ee(null),X.length=0,oe=0;ue.length;)ue.pop()();for(let t=0;t<ie.length;t+=1){const r=ie[t];fe.has(r)||(fe.add(r),r())}ie.length=0}while(X.length);for(;Fe.length;)Fe.pop()();pe=!1,fe.clear(),ee(e)}function Ze(e){if(e.fragment!==null){e.update(),te(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(de)}}const Qe=new Set;function Xe(e,t){e&&e.i&&(Qe.delete(e),e.i(t))}function et(e,t,r,s){const{fragment:i,after_update:c}=e.$$;i&&i.m(t,r),s||de(()=>{const f=e.$$.on_mount.map(Oe).filter(Pe);e.$$.on_destroy?e.$$.on_destroy.push(...f):te(f),e.$$.on_mount=[]}),c.forEach(de)}function tt(e,t){const r=e.$$;r.fragment!==null&&(te(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function rt(e,t){e.$$.dirty[0]===-1&&(X.push(e),Ke(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function nt(e,t,r,s,i,c,f,m=[-1]){const u=ge;ee(e);const l=e.$$={fragment:null,ctx:[],props:c,update:R,not_equal:i,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:we(),dirty:m,skip_bound:!1,root:t.target||u.$$.root};f&&f(l.root);let E=!1;if(l.ctx=r?r(e,t.props||{},(g,O,...j)=>{const b=j.length?j[0]:O;return l.ctx&&i(l.ctx[g],l.ctx[g]=b)&&(!l.skip_bound&&l.bound[g]&&l.bound[g](b),E&&rt(e,g)),O}):[],l.update(),E=!0,te(l.before_update),l.fragment=s?s(l.ctx):!1,t.target){if(t.hydrate){const g=Ve(t.target);l.fragment&&l.fragment.l(g),g.forEach(me)}else l.fragment&&l.fragment.c();t.intro&&Xe(e.$$.fragment),et(e,t.target,t.anchor,t.customElement),Ge()}ee(u)}class ot{$destroy(){tt(this,1),this.$destroy=R}$on(t,r){if(!Pe(r))return R;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(r),()=>{const i=s.indexOf(r);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!We(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Y=[];function Ue(e,t=R){let r;const s=new Set;function i(m){if(Se(e,m)&&(e=m,r)){const u=!Y.length;for(const l of s)l[1](),Y.push(l,e);if(u){for(let l=0;l<Y.length;l+=2)Y[l][0](Y[l+1]);Y.length=0}}}function c(m){i(m(e))}function f(m,u=R){const l=[m,u];return s.add(l),s.size===1&&(r=t(i)||R),m(e),()=>{s.delete(l),s.size===0&&(r(),r=null)}}return{set:i,update:c,subscribe:f}}function Ee(e){return Object.prototype.toString.call(e)==="[object Date]"}function he(e,t){if(e===t||e!==e)return()=>e;const r=typeof e;if(r!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const s=t.map((i,c)=>he(e[c],i));return i=>s.map(c=>c(i))}if(r==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Ee(e)&&Ee(t)){e=e.getTime(),t=t.getTime();const c=t-e;return f=>new Date(e+f*c)}const s=Object.keys(t),i={};return s.forEach(c=>{i[c]=he(e[c],t[c])}),c=>{const f={};return s.forEach(m=>{f[m]=i[m](c)}),f}}if(r==="number"){const s=t-e;return i=>e+i*s}throw new Error(`Cannot interpolate ${r} values`)}function it(e,t={}){const r=Ue(e);let s,i=e;function c(f,m){if(e==null)return r.set(e=f),Promise.resolve();i=f;let u=s,l=!1,{delay:E=0,duration:g=400,easing:O=Be,interpolate:j=he}=be(be({},t),m);if(g===0)return u&&(u.abort(),u=null),r.set(e=i),Promise.resolve();const b=qe()+E;let _;return s=ze(w=>{if(w<b)return!0;l||(_=j(e,f),typeof g=="function"&&(g=g(e,f)),l=!0),u&&(u.abort(),u=null);const k=w-b;return k>g?(r.set(e=f),!1):(r.set(e=_(O(k/g))),!0)}),s.promise}return{set:c,update:(f,m)=>c(f(i,e),m),subscribe:r.subscribe}}function st(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}),r}var at={exports:{}};(function(e){var t=function(r){var s=Object.prototype,i=s.hasOwnProperty,c=Object.defineProperty||function(o,n,a){o[n]=a.value},f,m=typeof Symbol=="function"?Symbol:{},u=m.iterator||"@@iterator",l=m.asyncIterator||"@@asyncIterator",E=m.toStringTag||"@@toStringTag";function g(o,n,a){return Object.defineProperty(o,n,{value:a,enumerable:!0,configurable:!0,writable:!0}),o[n]}try{g({},"")}catch{g=function(n,a,h){return n[a]=h}}function O(o,n,a,h){var p=n&&n.prototype instanceof U?n:U,v=Object.create(p.prototype),S=new L(h||[]);return c(v,"_invoke",{value:se(o,a,S)}),v}r.wrap=O;function j(o,n,a){try{return{type:"normal",arg:o.call(n,a)}}catch(h){return{type:"throw",arg:h}}}var b="suspendedStart",_="suspendedYield",w="executing",k="completed",y={};function U(){}function x(){}function G(){}var J={};g(J,u,function(){return this});var K=Object.getPrototypeOf,q=K&&K(K($([])));q&&q!==s&&i.call(q,u)&&(J=q);var M=G.prototype=U.prototype=Object.create(J);x.prototype=G,c(M,"constructor",{value:G,configurable:!0}),c(G,"constructor",{value:x,configurable:!0}),x.displayName=g(G,E,"GeneratorFunction");function re(o){["next","throw","return"].forEach(function(n){g(o,n,function(a){return this._invoke(n,a)})})}r.isGeneratorFunction=function(o){var n=typeof o=="function"&&o.constructor;return n?n===x||(n.displayName||n.name)==="GeneratorFunction":!1},r.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,G):(o.__proto__=G,g(o,E,"GeneratorFunction")),o.prototype=Object.create(M),o},r.awrap=function(o){return{__await:o}};function z(o,n){function a(v,S,A,T){var C=j(o[v],o,S);if(C.type==="throw")T(C.arg);else{var ae=C.arg,Z=ae.value;return Z&&typeof Z=="object"&&i.call(Z,"__await")?n.resolve(Z.__await).then(function(I){a("next",I,A,T)},function(I){a("throw",I,A,T)}):n.resolve(Z).then(function(I){ae.value=I,A(ae)},function(I){return a("throw",I,A,T)})}}var h;function p(v,S){function A(){return new n(function(T,C){a(v,S,T,C)})}return h=h?h.then(A,A):A()}c(this,"_invoke",{value:p})}re(z.prototype),g(z.prototype,l,function(){return this}),r.AsyncIterator=z,r.async=function(o,n,a,h,p){p===void 0&&(p=Promise);var v=new z(O(o,n,a,h),p);return r.isGeneratorFunction(n)?v:v.next().then(function(S){return S.done?S.value:v.next()})};function se(o,n,a){var h=b;return function(v,S){if(h===w)throw new Error("Generator is already running");if(h===k){if(v==="throw")throw S;return P()}for(a.method=v,a.arg=S;;){var A=a.delegate;if(A){var T=ne(A,a);if(T){if(T===y)continue;return T}}if(a.method==="next")a.sent=a._sent=a.arg;else if(a.method==="throw"){if(h===b)throw h=k,a.arg;a.dispatchException(a.arg)}else a.method==="return"&&a.abrupt("return",a.arg);h=w;var C=j(o,n,a);if(C.type==="normal"){if(h=a.done?k:_,C.arg===y)continue;return{value:C.arg,done:a.done}}else C.type==="throw"&&(h=k,a.method="throw",a.arg=C.arg)}}}function ne(o,n){var a=n.method,h=o.iterator[a];if(h===f)return n.delegate=null,a==="throw"&&o.iterator.return&&(n.method="return",n.arg=f,ne(o,n),n.method==="throw")||a!=="return"&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),y;var p=j(h,o.iterator,n.arg);if(p.type==="throw")return n.method="throw",n.arg=p.arg,n.delegate=null,y;var v=p.arg;if(!v)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y;if(v.done)n[o.resultName]=v.value,n.next=o.nextLoc,n.method!=="return"&&(n.method="next",n.arg=f);else return v;return n.delegate=null,y}re(M),g(M,E,"Generator"),g(M,u,function(){return this}),g(M,"toString",function(){return"[object Generator]"});function d(o){var n={tryLoc:o[0]};1 in o&&(n.catchLoc=o[1]),2 in o&&(n.finallyLoc=o[2],n.afterLoc=o[3]),this.tryEntries.push(n)}function F(o){var n=o.completion||{};n.type="normal",delete n.arg,o.completion=n}function L(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(d,this),this.reset(!0)}r.keys=function(o){var n=Object(o),a=[];for(var h in n)a.push(h);return a.reverse(),function p(){for(;a.length;){var v=a.pop();if(v in n)return p.value=v,p.done=!1,p}return p.done=!0,p}};function $(o){if(o){var n=o[u];if(n)return n.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var a=-1,h=function p(){for(;++a<o.length;)if(i.call(o,a))return p.value=o[a],p.done=!1,p;return p.value=f,p.done=!0,p};return h.next=h}}return{next:P}}r.values=$;function P(){return{value:f,done:!0}}return L.prototype={constructor:L,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(F),!o)for(var n in this)n.charAt(0)==="t"&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=f)},stop:function(){this.done=!0;var o=this.tryEntries[0],n=o.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var n=this;function a(T,C){return v.type="throw",v.arg=o,n.next=T,C&&(n.method="next",n.arg=f),!!C}for(var h=this.tryEntries.length-1;h>=0;--h){var p=this.tryEntries[h],v=p.completion;if(p.tryLoc==="root")return a("end");if(p.tryLoc<=this.prev){var S=i.call(p,"catchLoc"),A=i.call(p,"finallyLoc");if(S&&A){if(this.prev<p.catchLoc)return a(p.catchLoc,!0);if(this.prev<p.finallyLoc)return a(p.finallyLoc)}else if(S){if(this.prev<p.catchLoc)return a(p.catchLoc,!0)}else if(A){if(this.prev<p.finallyLoc)return a(p.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(o,n){for(var a=this.tryEntries.length-1;a>=0;--a){var h=this.tryEntries[a];if(h.tryLoc<=this.prev&&i.call(h,"finallyLoc")&&this.prev<h.finallyLoc){var p=h;break}}p&&(o==="break"||o==="continue")&&p.tryLoc<=n&&n<=p.finallyLoc&&(p=null);var v=p?p.completion:{};return v.type=o,v.arg=n,p?(this.method="next",this.next=p.finallyLoc,y):this.complete(v)},complete:function(o,n){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&n&&(this.next=n),y},finish:function(o){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.finallyLoc===o)return this.complete(a.completion,a.afterLoc),F(a),y}},catch:function(o){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc===o){var h=a.completion;if(h.type==="throw"){var p=h.arg;F(a)}return p}}throw new Error("illegal catch attempt")},delegateYield:function(o,n,a){return this.delegate={iterator:$(o),resultName:n,nextLoc:a},this.method==="next"&&(this.arg=f),y}},r}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(at);var ct={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}},ft=(e,t)=>{const r=e._malloc(t.length*Uint32Array.BYTES_PER_ELEMENT);return t.forEach((s,i)=>{const c=e.lengthBytesUTF8(s)+1,f=e._malloc(c);e.stringToUTF8(s,f,c),e.setValue(r+Uint32Array.BYTES_PER_ELEMENT*i,f,"i32")}),[t.length,r]};const lt="@ffmpeg/ffmpeg",ut="0.11.6",pt="FFmpeg WebAssembly version",dt="src/index.js",ht="src/index.d.ts",mt={example:"examples"},gt={start:"node scripts/server.js","start:worker":"node scripts/worker-server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js","build:worker":"rimraf dist && webpack --config scripts/webpack.config.worker.prod.js",prepublishOnly:"npm run build",lint:"eslint src",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node node_modules/mocha/bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},yt={"./src/node/index.js":"./src/browser/index.js"},bt={type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},wt=["ffmpeg","WebAssembly","video"],vt="Jerome Wu <jeromewus@gmail.com>",_t="MIT",Ft={url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},Et={node:">=12.16.1"},Lt="https://github.com/ffmpegwasm/ffmpeg.wasm#readme",jt={"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},$t={"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.11.0","@types/emscripten":"^1.39.4","babel-eslint":"^10.1.0","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},Me={name:lt,version:ut,description:pt,main:dt,types:ht,directories:mt,scripts:gt,browser:yt,repository:bt,keywords:wt,author:vt,license:_t,bugs:Ft,engines:Et,homepage:Lt,dependencies:jt,devDependencies:$t},kt=(typeof process<"u",`https://unpkg.com/@ffmpeg/core@${Me.devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`),Ot={corePath:kt};let ye=!1,De=()=>{};const Pt=e=>{ye=e},St=e=>{De=e},At=(e,t)=>{De({type:e,message:t}),ye&&console.log(`[${e}] ${t}`)};var W={logging:ye,setLogging:Pt,setCustomLogger:St,log:At};const Ct=e=>`
createFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${e}. Use another URL when calling createFFmpeg():

const ffmpeg = createFFmpeg({
  corePath: 'http://localhost:3000/ffmpeg-core.js',
});
`;var Le={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:Ct};const V=async(e,t)=>{W.log("info",`fetch ${e}`);const r=await(await fetch(e)).arrayBuffer();W.log("info",`${e} file size = ${r.byteLength} bytes`);const s=new Blob([r],{type:t}),i=URL.createObjectURL(s);return W.log("info",`${e} blob URL = ${i}`),i},Tt=async({corePath:e,workerPath:t,wasmPath:r})=>{if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){if(typeof e!="string")throw Error("corePath should be a string!");const m=new URL(e,import.meta.url).href,u=await V(m,"application/javascript"),l=await V(r!==void 0?r:m.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),E=await V(t!==void 0?t:m.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(g=>{if(globalThis.importScripts(u),typeof createFFmpegCore>"u")throw Error(Le.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(m));W.log("info","ffmpeg-core.js script loaded"),g({createFFmpegCore,corePath:u,wasmPath:l,workerPath:E})}):(W.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:u,wasmPath:l,workerPath:E}))}if(typeof e!="string")throw Error("corePath should be a string!");const s=new URL(e,import.meta.url).href,i=await V(s,"application/javascript"),c=await V(r!==void 0?r:s.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),f=await V(t!==void 0?t:s.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(m=>{const u=document.createElement("script"),l=()=>{if(u.removeEventListener("load",l),typeof createFFmpegCore>"u")throw Error(Le.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(s));W.log("info","ffmpeg-core.js script loaded"),m({createFFmpegCore,corePath:i,wasmPath:c,workerPath:f})};u.src=i,u.type="text/javascript",u.addEventListener("load",l),document.getElementsByTagName("head")[0].appendChild(u)}):(W.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:i,wasmPath:c,workerPath:f}))},Nt=e=>new Promise((t,r)=>{const s=new FileReader;s.onload=()=>{t(s.result)},s.onerror=({target:{error:{code:i}}})=>{r(Error(`File could not be read! Code=${i}`))},s.readAsArrayBuffer(e)}),Rt=async e=>{let t=e;return typeof e>"u"?new Uint8Array:(typeof e=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(new URL(e,import.meta.url).href)).arrayBuffer():(e instanceof File||e instanceof Blob)&&(t=await Nt(e)),new Uint8Array(t))},Gt=Object.freeze(Object.defineProperty({__proto__:null,defaultOptions:Ot,getCreateFFmpegCore:Tt,fetchFile:Rt},Symbol.toStringTag,{value:"Module"})),Ie=st(Gt),{defaultArgs:Ut,baseOptions:Mt}=ct,Dt=ft,{defaultOptions:It,getCreateFFmpegCore:Bt}=Ie,{version:Wt}=Me,le=Error("ffmpeg.wasm is not ready, make sure you have completed load().");var xt=(e={})=>{const{log:t,logger:r,progress:s,...i}={...Mt,...It,...e};let c=null,f=null,m=null,u=null,l=!1,E=()=>{},g=t,O=s,j=0,b=0,_=!1,w=0;const k=d=>{d==="FFMPEG_END"&&m!==null&&(m(),m=null,u=null,l=!1)},y=(d,F)=>{E({type:d,message:F}),g&&console.log(`[${d}] ${F}`)},U=d=>{const[F,L,$]=d.split(":");return parseFloat(F)*60*60+parseFloat(L)*60+parseFloat($)},x=(d,F)=>{if(typeof d=="string")if(d.startsWith("  Duration")){const L=d.split(", ")[0].split(": ")[1],$=U(L);F({duration:$,ratio:w}),(j===0||j>$)&&(j=$,_=!0)}else if(_&&d.startsWith("    Stream")){const L=d.match(/([\d.]+) fps/);if(L){const $=parseFloat(L[1]);b=j*$}else b=0;_=!1}else if(d.startsWith("frame")||d.startsWith("size")){const L=d.split("time=")[1].split(" ")[0],$=U(L),P=d.match(/frame=\s*(\d+)/);if(b&&P){const o=parseFloat(P[1]);w=Math.min(o/b,1)}else w=$/j;F({ratio:w,time:$})}else d.startsWith("video:")&&(F({ratio:1}),j=0)},G=({type:d,message:F})=>{y(d,F),x(F,O),k(F)},J=async()=>{if(y("info","load ffmpeg-core"),c===null){y("info","loading ffmpeg-core");const{createFFmpegCore:d,corePath:F,workerPath:L,wasmPath:$}=await Bt(i);c=await d({mainScriptUrlOrBlob:F,printErr:P=>G({type:"fferr",message:P}),print:P=>G({type:"ffout",message:P}),locateFile:(P,o)=>{if(typeof window<"u"||typeof WorkerGlobalScope<"u"){if(typeof $<"u"&&P.endsWith("ffmpeg-core.wasm"))return $;if(typeof L<"u"&&P.endsWith("ffmpeg-core.worker.js"))return L}return o+P}}),f=c.cwrap(i.mainName||"proxy_main","number",["number","number"]),y("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")},K=()=>c!==null,q=(...d)=>{if(y("info",`run ffmpeg command: ${d.join(" ")}`),c===null)throw le;if(l)throw Error("ffmpeg.wasm can only run one command at a time");return l=!0,new Promise((F,L)=>{const $=[...Ut,...d].filter(P=>P.length!==0);m=F,u=L,f(...Dt(c,$))})},M=(d,...F)=>{if(y("info",`run FS.${d} ${F.map(L=>typeof L=="string"?L:`<${L.length} bytes binary file>`).join(" ")}`),c===null)throw le;{let L=null;try{L=c.FS[d](...F)}catch{throw Error(d==="readdir"?`ffmpeg.FS('readdir', '${F[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:d==="readFile"?`ffmpeg.FS('readFile', '${F[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return L}},re=()=>{if(c===null)throw le;u&&u("ffmpeg has exited"),l=!1;try{c.exit(1)}catch(d){y(d.message),u&&u(d)}finally{c=null,f=null,m=null,u=null}},z=d=>{O=d},se=d=>{E=d},ne=d=>{g=d};return y("info",`use ffmpeg.wasm v${Wt}`),{setProgress:z,setLogger:se,setLogging:ne,load:J,isLoaded:K,run:q,exit:re,FS:M}};const qt=xt,{fetchFile:zt}=Ie;var je={createFFmpeg:qt,fetchFile:zt};function $e(e,t,r){const s=e.slice();return s[11]=t[r],s}function ke(e){let t,r=e[11].format+"",s,i;return{c(){t=B("option"),s=Re(r),i=Q(),t.__value=e[11].format,t.value=t.__value},m(c,f){Ne(c,t,f),N(t,s),N(t,i)},p:R,d(c){c&&me(t)}}}function Yt(e){let t,r,s,i,c,f,m,u,l,E,g,O,j,b=e[4],_=[];for(let w=0;w<b.length;w+=1)_[w]=ke($e(e,b,w));return{c(){t=B("main"),r=B("h1"),r.textContent="Audio conversion",s=Q(),i=B("select");for(let w=0;w<_.length;w+=1)_[w].c();c=Q(),f=B("button"),f.textContent="Abrir arquivo...",m=Q(),u=B("input"),l=Q(),E=B("progress"),D(i,"name","filetype"),D(i,"id","filetype"),D(i,"class","svelte-vngnnq"),D(u,"type","file"),D(u,"name","input"),D(u,"id","input"),He(u,"display","none"),E.value=e[2],D(E,"id","conversion"),E.hidden=g=e[2]===0,D(t,"class","svelte-vngnnq")},m(w,k){Ne(w,t,k),N(t,r),N(t,s),N(t,i);for(let y=0;y<_.length;y+=1)_[y].m(i,null);_e(i,e[1]),N(t,c),N(t,f),N(t,m),N(t,u),e[9](u),N(t,l),N(t,E),O||(j=[ce(i,"change",e[8]),ce(f,"click",e[6]),ce(u,"change",e[7])],O=!0)},p(w,[k]){if(k&16){b=w[4];let y;for(y=0;y<b.length;y+=1){const U=$e(w,b,y);_[y]?_[y].p(U,k):(_[y]=ke(U),_[y].c(),_[y].m(i,null))}for(;y<_.length;y+=1)_[y].d(1);_.length=b.length}k&18&&_e(i,w[1]),k&4&&(E.value=w[2]),k&4&&g!==(g=w[2]===0)&&(E.hidden=g)},i:R,o:R,d(w){w&&me(t),Ye(_,w),e[9](null),O=!1,te(j)}}}function Vt(e,t){const r=document.createElement("a");r.href=e,r.download=t||e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}function Ht(e,t,r){let s,i;const c=je.createFFmpeg({log:!0}),f=it(0);ve(e,f,b=>r(2,i=b)),c.setProgress(b=>f.set(Math.max(Math.min(b.ratio,100),.1))),c.isLoaded()||c.load();const m=[{format:"mp3",mime:"audio/mpeg3",type:"audio"},{format:"opus",mime:"audio/opus",type:"audio"},{format:"m4a",mime:"audio/mp4",type:"audio"}];document.body.addEventListener("drop",b=>{});let u=Ue("mp3");ve(e,u,b=>r(1,s=b));let l;async function E(){l&&l.click()}async function g(){l.files[0].size>512e6&&alert("File too big");const{name:b}=l.files[0],_="output."+s;for(;!c.isLoaded(););c.FS("writeFile",b,await je.fetchFile(l.files[0])),await c.run("-i",b,_);const w=c.FS("readFile",_);Vt(URL.createObjectURL(new Blob([w.buffer])),b+"."+s)}const O=b=>u.set(b.currentTarget.value);function j(b){ue[b?"unshift":"push"](()=>{l=b,r(0,l)})}return[l,s,i,f,m,u,E,g,O,j]}class Jt extends ot{constructor(t){super(),nt(this,t,Ht,Yt,Se,{})}}new Jt({target:document.getElementById("app")});
